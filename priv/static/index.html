<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Elixir+YOLOv3テスト</title>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <!-- <script src="js/app.js"></script> -->
    <!-- <link rel="stylesheet" href="css/app.css"> -->
  </head>
  <body>
    <div style="width: 640px; height: 480px; overflow: auto;">
      <img id="captured" src="/photo.jpg">
    </div>
    
    画像:<input type="file" name="photo" id="photo">
    <pre id="answer"></pre>

    <script>
      $('#photo').change(function() {
          var fd = new FormData();
          fd.append("photo", $(this).prop('files')[0]);
          $.ajax({
              url: "/predict_photo",
              type: "POST",
              data: fd,
              processData: false,
              contentType: false,
              dataType: 'text'
          })
          .done(function(data) {
              $("#captured").attr("src", "/photo.jpg?timestamp=" + new Date().getTime());
              $("#answer").html(data)
          });
          return false;
      });
    </script>
  </body>
</html>
